


ARM Macro Assembler    Page 1 


    1 00000000         
    2 00000000                 INCLUDE          bsp_irq.inc
    1 00000000 00000000 
                       E_HARD_USART_IRQ_ID
                               EQU              0
    2 00000000 00000001 
                       E_HARDWARE_IRQ_MAX
                               EQU              1
    3 00000000 00000001 
                       E_CORE_SYSTICK_IRQ_ID
                               EQU              1
    4 00000000 00000002 
                       E_CORE_SYSCALL_IRQ_ID
                               EQU              2
    5 00000000 00000003 
                       E_SYSTEM_IRQ_MAX
                               EQU              3
    6 00000000                 END
    3 00000000                 INCLUDE          saveirq.inc
    1 00000000                 IF               :DEF:DEBUG_IRQ_MONITOR
   14 00000000                 MACRO
   15 00000000         $label  M_SAVE_IRQ       $ID
   16 00000000                 MEND
   17 00000000                 ENDIF                        ;DEBUG_IRQ_MONITOR
   18 00000000                 END
    4 00000000         
    5 00000000                 EXPORT           PendSV_Handler
    6 00000000                 EXPORT           SVC_Handler
    7 00000000         
    8 00000000                 IMPORT           CORE_EnterIRQ
    9 00000000                 IMPORT           CORE_LeaveIRQ
   10 00000000                 IMPORT           CORE_HandlerLPC
   11 00000000         
   12 00000000                 PRESERVE8
   13 00000000         
   14 00000000                 AREA             |.text|, CODE, READONLY
   15 00000000                 ALIGN            4
   16 00000000                 THUMB
   17 00000000         
   18 00000000         PendSV_Handler
                               PROC
   19 00000000 4770            BX               LR
   20 00000002                 ENDP
   21 00000002         
   22 00000002         SVC_Handler
                               PROC
   23 00000002 B672            CPSID            I
   24 00000004 B500            PUSH             {LR}
   25 00000006 E92D 0FF0       PUSH             {R4-R11}
   26 0000000A                 M_SAVE_IRQ       #E_CORE_SYSCALL_IRQ_ID
   27 0000000A 4604            MOV              R4,    R0   ; 暂存入参 1
   28 0000000C 460D            MOV              R5,    R1   ; 暂存入参 2
   29 0000000E 4616            MOV              R6,    R2   ; 暂存入参 3
   30 00000010 4668            MOV              R0,    R13  ; 堆栈指针作为入参
   31 00000012 F7FF FFFE       BL               CORE_EnterIRQ ; 保存堆栈指针
   32 00000016 4685            MOV              R13,   R0   ; 使用内核堆栈
   33 00000018 B662            CPSIE            I
   34 0000001A         
   35 0000001A 4620            MOV              R0,    R4   ; 弹出入参 1



ARM Macro Assembler    Page 2 


   36 0000001C 4629            MOV              R1,    R5   ; 弹出入参 2
   37 0000001E 4632            MOV              R2,    R6   ; 弹出入参 3
   38 00000020 F7FF FFFE       BL               CORE_HandlerLPC 
                                                            ; 进入中断处理程序
   39 00000024         
   40 00000024 B672            CPSID            I
   41 00000026 4668            MOV              R0,    R13  ; 堆栈指针作为入参
   42 00000028 F7FF FFFE       BL               CORE_LeaveIRQ 
                                                            ; 加载新的堆栈指针
   43 0000002C 4685            MOV              R13,   R0
   44 0000002E E8BD 0FF0       POP              {R4-R11}
   45 00000032 B662            CPSIE            I
   46 00000034 BD00            POP              {PC}
   47 00000036                 ENDP
   48 00000036         
   49 00000036         ALIGN
   50 00000036                 END
Command Line: --debug --xref --cpu=Cortex-M3 --apcs=interwork --depend=..\..\Ob
ject\stm32-alientek\svc_entry.d -o..\..\Object\stm32-alientek\svc_entry.o -I..\
..\Source\Platform\hal\cortex-m3 -I..\..\Source\Platform\bsp\stm32\huge -IC:\Ke
il\ARM\RV31\INC -IC:\Keil\ARM\CMSIS\Include -IC:\Keil\ARM\Inc\ST\STM32F10x --li
st=.\svc_entry.lst ..\..\Source\Platform\hal\stm32\arm\svc_entry.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

.text 00000000

Symbol: .text
   Definitions
      At line 14 in file ..\..\Source\Platform\hal\stm32\arm\svc_entry.s
   Uses
      None
Comment: .text unused
ALIGN 00000036

Symbol: ALIGN
   Definitions
      At line 49 in file ..\..\Source\Platform\hal\stm32\arm\svc_entry.s
   Uses
      None
Comment: ALIGN unused
PendSV_Handler 00000000

Symbol: PendSV_Handler
   Definitions
      At line 18 in file ..\..\Source\Platform\hal\stm32\arm\svc_entry.s
   Uses
      At line 5 in file ..\..\Source\Platform\hal\stm32\arm\svc_entry.s
Comment: PendSV_Handler used once
SVC_Handler 00000002

Symbol: SVC_Handler
   Definitions
      At line 22 in file ..\..\Source\Platform\hal\stm32\arm\svc_entry.s
   Uses
      At line 6 in file ..\..\Source\Platform\hal\stm32\arm\svc_entry.s
Comment: SVC_Handler used once
4 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

E_CORE_SYSCALL_IRQ_ID 00000002

Symbol: E_CORE_SYSCALL_IRQ_ID
   Definitions
      At line 4 in file ..\..\Source\Platform\bsp\stm32\huge\bsp_irq.inc
   Uses
      None
Comment: E_CORE_SYSCALL_IRQ_ID unused
E_CORE_SYSTICK_IRQ_ID 00000001

Symbol: E_CORE_SYSTICK_IRQ_ID
   Definitions
      At line 3 in file ..\..\Source\Platform\bsp\stm32\huge\bsp_irq.inc
   Uses
      None
Comment: E_CORE_SYSTICK_IRQ_ID unused
E_HARDWARE_IRQ_MAX 00000001

Symbol: E_HARDWARE_IRQ_MAX
   Definitions
      At line 2 in file ..\..\Source\Platform\bsp\stm32\huge\bsp_irq.inc
   Uses
      None
Comment: E_HARDWARE_IRQ_MAX unused
E_HARD_USART_IRQ_ID 00000000

Symbol: E_HARD_USART_IRQ_ID
   Definitions
      At line 1 in file ..\..\Source\Platform\bsp\stm32\huge\bsp_irq.inc
   Uses
      None
Comment: E_HARD_USART_IRQ_ID unused
E_SYSTEM_IRQ_MAX 00000003

Symbol: E_SYSTEM_IRQ_MAX
   Definitions
      At line 5 in file ..\..\Source\Platform\bsp\stm32\huge\bsp_irq.inc
   Uses
      None
Comment: E_SYSTEM_IRQ_MAX unused
5 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
External symbols

CORE_EnterIRQ 00000000

Symbol: CORE_EnterIRQ
   Definitions
      At line 8 in file ..\..\Source\Platform\hal\stm32\arm\svc_entry.s
   Uses
      At line 31 in file ..\..\Source\Platform\hal\stm32\arm\svc_entry.s
Comment: CORE_EnterIRQ used once
CORE_HandlerLPC 00000000

Symbol: CORE_HandlerLPC
   Definitions
      At line 10 in file ..\..\Source\Platform\hal\stm32\arm\svc_entry.s
   Uses
      At line 38 in file ..\..\Source\Platform\hal\stm32\arm\svc_entry.s
Comment: CORE_HandlerLPC used once
CORE_LeaveIRQ 00000000

Symbol: CORE_LeaveIRQ
   Definitions
      At line 9 in file ..\..\Source\Platform\hal\stm32\arm\svc_entry.s
   Uses
      At line 42 in file ..\..\Source\Platform\hal\stm32\arm\svc_entry.s
Comment: CORE_LeaveIRQ used once
3 symbols
344 symbols in table
